<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Inventory Management: The Art of Balancing Supply and Demand :: Donato Maragno</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<meta name="description" content="
In this post, I explain what inventory management is, why it matters, and how organizations can systematically improve it using mathematical optimization. First, I discuss inventory management from a generic perspective, highlighting the key principles, policies, and challenges. Then, I dive into a practical case study inventory management, showing how optimization can be applied to determine ideal reordering policy.
What is inventory management, and why does it matter? At its core, inventory management is the art, and often the headache, of ensuring that the right product is available in the right place, at the right time, and at the right cost. Sounds simple, but in practice it’s one of the most complex problems in operations, especially when the number of products is large, the supply chain has multiple levels, and the costs structure has several components. On the one hand, organizations want to keep inventories lean: holding too much stock ties up capital, increases storage costs, and risks obsolescence. On the other hand, running too lean can mean lost sales, production delays, and unsatisfied customers. The sweet spot lies somewhere in between, and finding it consistently is the challenge.
" />
<meta name="keywords" content="" />


<title>
  
    Inventory Management: The Art of Balancing Supply and Demand | Donato Maragno
  
</title>



  <meta name="robots" content="noodp" />


<link rel="canonical" href="/posts/inventory-management/" />






  
  <link rel="stylesheet" href="/css/main.min.7a14a14d336b3b7500d403219af40c71f75b21e41e75ac9170345d45d70ec473.css">

  
  <link rel="stylesheet" href="/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="/css/menu.min.310d32205bdedd6f43144e3c3273c9deecd238eba5f9108db5ea96ca0cfbe377.css">

  
  <link rel="stylesheet" href="/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="/css/post.min.ad50c7f4d00e7975918f37fc74c6029e1959a40d66fb5b2c6564a8715e985573.css">

  
  <link rel="stylesheet" href="/css/syntax.min.e9ab635cf918bc84b901eb65c0b2caa74c9544245e3647c1af5c129896ef276e.css">

  
  <link rel="stylesheet" href="/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">

<link rel="stylesheet" href="/terminal.css">



<link rel="shortcut icon" href="/favicon.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Inventory Management: The Art of Balancing Supply and Demand" />
<meta name="twitter:description" content="

In this post, I explain what inventory management is, why it matters, and how organizations can systematically improve it using mathematical optimization. First, I discuss inventory management from a generic perspective, highlighting the key principles, policies, and challenges. Then, I dive into a practical case study inventory management, showing how optimization can be applied to determine ideal reordering policy.
What is inventory management, and why does it matter?
At its core, inventory management is the art, and often the headache, of ensuring that the right product is available in the right place, at the right time, and at the right cost. Sounds simple, but in practice it’s one of the most complex problems in operations, especially when the number of products is large, the supply chain has multiple levels, and the costs structure has several components.
On the one hand, organizations want to keep inventories lean: holding too much stock ties up capital, increases storage costs, and risks obsolescence. On the other hand, running too lean can mean lost sales, production delays, and unsatisfied customers. The sweet spot lies somewhere in between, and finding it consistently is the challenge." />
<meta name="twitter:url" content="/posts/inventory-management/" />

  
    <meta name="twitter:site" content="" />
  
  <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Inventory Management: The Art of Balancing Supply and Demand" />
<meta property="og:description" content="
In this post, I explain what inventory management is, why it matters, and how organizations can systematically improve it using mathematical optimization. First, I discuss inventory management from a generic perspective, highlighting the key principles, policies, and challenges. Then, I dive into a practical case study inventory management, showing how optimization can be applied to determine ideal reordering policy.
What is inventory management, and why does it matter? At its core, inventory management is the art, and often the headache, of ensuring that the right product is available in the right place, at the right time, and at the right cost. Sounds simple, but in practice it’s one of the most complex problems in operations, especially when the number of products is large, the supply chain has multiple levels, and the costs structure has several components. On the one hand, organizations want to keep inventories lean: holding too much stock ties up capital, increases storage costs, and risks obsolescence. On the other hand, running too lean can mean lost sales, production delays, and unsatisfied customers. The sweet spot lies somewhere in between, and finding it consistently is the challenge.
" />
<meta property="og:url" content="/posts/inventory-management/" />
<meta property="og:site_name" content="Donato Maragno" />





  

<meta property="og:image" content="/preview_post.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="627" />




  <meta property="article:published_time" content="2025-08-21 00:00:00 &#43;0000 UTC" />









<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>





</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Donato Maragno, PhD
  </div>
</a>
    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About me</a></li>
        
      
        
          <li><a href="/research">Research</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About me</a></li>
        
      
        
          <li><a href="/research" >Research</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="/posts/inventory-management/">Inventory Management: The Art of Balancing Supply and Demand</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-08-21</time></div>

  
    <span class="post-tags">
      
      #<a href="/tags/application/">application</a>&nbsp;
      
      #<a href="/tags/optimization/">optimization</a>&nbsp;
      
      #<a href="/tags/inventory/">inventory</a>&nbsp;
      
      #<a href="/tags/spare-parts/">spare-parts</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p><img src="/images/inventory.jpg" alt="inventory.jpg"></p>
<blockquote>
<p>In this post, I explain what inventory management is, why it matters, and how organizations can systematically improve it using mathematical optimization. First, I discuss inventory management from a generic perspective, highlighting the key principles, policies, and challenges. Then, I dive into a practical case study inventory management, showing how optimization can be applied to determine ideal reordering policy.</p></blockquote>
<h1 id="what-is-inventory-management-and-why-does-it-matter">What is inventory management, and why does it matter?<a href="#what-is-inventory-management-and-why-does-it-matter" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>At its core, inventory management is the art, and often the headache, of ensuring that the right product is available in the right place, at the right time, and at the right cost. Sounds simple, but in practice it’s one of the most complex problems in operations, especially when the number of products is large, the supply chain has multiple levels, and the costs structure has several components.
On the one hand, organizations want to keep inventories lean: holding too much stock ties up capital, increases storage costs, and risks obsolescence. On the other hand, running too lean can mean lost sales, production delays, and unsatisfied customers. The sweet spot lies somewhere in between, and finding it consistently is the challenge.</p>
<h2 id="some-notation-before-continuing">Some notation before continuing<a href="#some-notation-before-continuing" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>To understand inventory management, it helps to agree on some basic terms. These are the building blocks of most models and policies:</p>
<ul>
<li>
<p><strong>Policy</strong>: The rule that governs ordering decisions: when to order and how much.</p>
</li>
<li>
<p><strong>Service Level</strong>: The ability to meet customer demand without running out of stock. It can have more specific definitions like:</p>
<ul>
<li><em>cycle service level</em>: <em>the probability of not stocking out between one replenishment and the next</em>.</li>
<li><em>Fill rate</em>: the fraction of demand that can be met immediately from inventory</li>
</ul>
</li>
<li>
<p><strong>Lead Time</strong>: The time between placing an order and receiving it. Lead time can be stable (e.g., always 5 days) or highly variable (sometimes 2 days, sometimes 12), and this uncertainty has a big impact on how much safety stock you need.</p>
</li>
<li>
<p><strong>Safety Stock</strong>: Extra inventory held as a buffer against uncertainty in demand or lead time. Think of it as an insurance: the more volatile your environment, the more safety stock you may need.</p>
</li>
<li>
<p><strong>Backorder vs. Lost Sale</strong>: When demand cannot be met:</p>
<ul>
<li><em>Backorder</em>: you promise to deliver later.</li>
<li><em>Lost Sale</em>: the customer walks away, and the revenue is gone for good.</li>
</ul>
</li>
<li>
<p><strong>Holding Cost</strong>: The cost of keeping stock. This includes more than just warehouse rent: tied-up capital, insurance, depreciation, spoilage, and obsolescence all count.</p>
</li>
<li>
<p><strong>Ordering Cost</strong>: The fixed cost incurred every time you place an order, regardless of size (administration, setup, paperwork, logistics). This is why large, infrequent orders can be attractive.</p>
</li>
<li>
<p><strong>Stockout (or Shortage) Cost</strong>: The cost of not having inventory when needed. This can be explicit (penalties, expediting fees) or implicit (lost sales, unhappy customers, reputational damage).</p>
</li>
<li>
<p><strong>Capacity</strong>: Practical limits such as storage space, supplier production limits, or transport bottlenecks.</p>
</li>
<li>
<p><strong>Multi-Echelon Inventory</strong>: When stock is spread across multiple layers of a network (plants, central warehouses, regional depots, retail stores). Managing them in isolation leads to inefficiencies; managing them as a system unlocks savings and higher service.</p>
</li>
</ul>
<h5 id="a-policy-is-all-you-need">A policy is all you need<a href="#a-policy-is-all-you-need" class="hanchor" ariaLabel="Anchor">#</a> </h5>
<p>Whether we’re talking about spare parts for an airline, fast-moving goods in a supermarket, or raw materials for a manufacturer, what differentiate inventory systems from each others is the adopted reordering policy.
Inventory management without policies is like playing chess without knowing how the pieces move, every decision feels ad hoc. Policies provide structure. They translate abstract objectives (like “keep service level above 95%” or “minimize holding cost”) into operational rules that can be executed day to day.</p>
<p>Some policies among the most used ones are:</p>
<h6 id="s-q-reorder-point--fixed-order-quantity-policy">(s, Q) Reorder Point / Fixed Order Quantity Policy<a href="#s-q-reorder-point--fixed-order-quantity-policy" class="hanchor" ariaLabel="Anchor">#</a> </h6>
<ul>
<li><strong>How it works:</strong>
<ul>
<li>When stock drops to a <strong>reorder point (s)</strong>, place an order of a <strong>fixed quantity (Q)</strong>.</li>
</ul>
</li>
<li><strong>Best for:</strong> Items with stable demand or critical items where stockouts are costly.</li>
<li><strong>Implication:</strong> The order size never changes.</li>
<li><strong>Pros:</strong> Simple to calculate; ensures a buffer against stockouts.</li>
<li><strong>Cons:</strong> Requires continuous inventory monitoring.</li>
<li><strong>Example:</strong>
<ul>
<li>s = 21 units, Q = 50 units</li>
<li>Current inventory drops to 20 → order 50 units → new inventory = 70</li>
<li>Current inventory drops to 10 → order 50 units → new inventory = 60</li>
</ul>
</li>
</ul>
<h6 id="s-s-policy">(s, S) Policy<a href="#s-s-policy" class="hanchor" ariaLabel="Anchor">#</a> </h6>
<ul>
<li><strong>How it works:</strong>
<ul>
<li>When inventory falls to <strong>s</strong>, order enough to raise stock to <strong>S</strong>.</li>
<li>Order quantity varies depending on current inventory level.</li>
</ul>
</li>
<li><strong>Best for:</strong> Items with variable demand.</li>
<li><strong>Implication:</strong> The order quantity <strong>varies depending on current stock</strong>.</li>
<li><strong>Pros:</strong> Flexible; reduces risk of overstocking.</li>
<li><strong>Cons:</strong> More complex than fixed-order policies and requires continuous inventory monitoring.</li>
<li><strong>Example:</strong>
<ul>
<li>s = 21 units, S = 70 units</li>
<li>Current inventory drops to 20 → order 50 units → new inventory = 70</li>
<li>Current inventory drops to 10 → order 60 units → new inventory = 70</li>
</ul>
</li>
</ul>
<h6 id="periodic-review-p-q-policy">Periodic Review (P, Q) Policy<a href="#periodic-review-p-q-policy" class="hanchor" ariaLabel="Anchor">#</a> </h6>
<ul>
<li><strong>How it works:</strong>
<ul>
<li>Inventory is checked at <strong>fixed intervals</strong> (e.g., weekly, monthly).</li>
<li>If inventory is below a target, place an order of a <strong>fixed quantity (Q)</strong>.</li>
</ul>
</li>
<li><strong>Best for:</strong> Items where continuous monitoring is costly or less critical.</li>
<li><strong>Pros:</strong> Simplifies monitoring and ordering schedules.</li>
<li><strong>Cons:</strong> Requires larger safety stock to cover intervals between reviews.</li>
<li><strong>Example:</strong><br>
- Review period P = 1 week, Q = 50, safety stock = 40.
- Inventory on review day = 30 → order 50 → new inventory = 80.<br>
- If demand consumes 70 units in the week, next order waits until the following review day, possibly requiring safety stock.</li>
</ul>
<p>Each policy comes with strengths and blind spots. A simple reorder point policy may work well in stable environments but break down when variability spikes. Conversely, more sophisticated dynamic policies require stronger data and computational support.</p>
<p>The real art lies not just in picking a policy, but in optimizing its parameters. The difference between a reorder point of 50 units vs. 55 can mean thousands of euros in holding cost or service penalties over a year. That’s why optimization models are often tasked with finding these values, rather than leaving them to gut feeling.</p>
<h2 id="uncertainty-the-ever-present-wild-card">Uncertainty: the ever-present wild card<a href="#uncertainty-the-ever-present-wild-card" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>If policies are the rules of the game, uncertainty is the opponent that refuses to play fair. It’s the defining feature of inventory problems, what makes them fascinating, frustrating, and financially critical. Let´s see where uncertainty might appear, but I will write another post deep diving into it.</p>
<p><strong>Demand variability</strong> is the most obvious source. Forecasts, no matter how advanced, are imperfect. Promotions can double demand overnight. A single customer order might dwarf the “average” week in industries like heavy machinery or aerospace.
Then there’s <strong>supply-side uncertainty</strong>. Lead times are rarely constant. A supplier might deliver in 5 days on average, but sometimes it’s 2, sometimes 12. Add in risks like port congestion, strikes, or geopolitical shocks, and suddenly the neat numbers in your planning file look less reassuring.
And don’t forget <strong>internal uncertainty</strong>, production lines that break down, IT systems that hiccup, or simply human error in recording transactions.</p>
<p>There are two main ways to respond to it:</p>
<ul>
<li><strong>Safety stock</strong>: paying an insurance premium in the form of extra inventory.</li>
<li><strong>Network flexibility</strong>: dual sourcing or dynamic reallocation between warehouses.
Both of them aim at increasing robustness in the inventory management system.</li>
</ul>
<p>From a mathematical perspective, uncertainty is what turns a simple deterministic model into a rich stochastic or robust optimization problem, and I love it. Instead of asking, <em>“What’s the optimal order if demand next week is 100 units?”</em>, the real question should be, <em>“What’s the policy that works best across hundreds of possible futures?”</em>. But again, this is for another post. Now let´s continue with the <em>easier</em> deterministic assumption.</p>
<h1 id="an-optimal-policy-is-all-you-need">An <em>OPTIMAL</em> policy is all you need<a href="#an-optimal-policy-is-all-you-need" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>Yes, you don’t just need <em>a</em> policy; you need the <em>optimal</em> one. A policy is a rulebook for how inventory decisions are made: when to order, and how much. But among the many possible rules, some are clearly better than others in terms of cost and service. An <em>optimal</em> policy is the one that achieves the desired objectives (high availability, low cost) without wasting resources.</p>
<p>Of course, the real world is full of uncertainty: demand fluctuates, lead times vary, and suppliers can fail. But before dealing with those messy realities, it’s crucial to first build intuition in a simpler setting, the <strong>deterministic case</strong>, where demand and lead times are perfectly known. This isn’t realistic, but it provides solid foundations: by understanding the “clean” case, we know what we’re aiming for before layering on uncertainty.</p>
<p>How to optimize a policy depends on the policy itself. To give you a concrete example, I will use the (s, S) policy which is simple, intuitive, and widely used in both research and practice.  We have a <strong>multi-item multi-period inventory</strong> problem. The goal is to find for each item an (s, S) policy that <strong>minimizes costs</strong> while respecting service level constraints. <em>Note that a similar methodology could be applied to the case where the service level is maximized and the spend constrained to a predefined budget.</em></p>
<p>We model this problem using <strong>mixed-integer optimization (MIO)</strong>, a powerful yet intuitive way to translate real-world decisions into mathematical equations. For each item, demand is assumed to be known in advance and represented as a 52-dimensional vector (one entry per week over a full year). We also assume that the <strong>reordering policy remains fixed throughout the year</strong>. Why? Because constantly adjusting rules for every single item would overwhelm planners with operational complexity. A stable, year-long policy provides consistency, reduces overhead, and ensures that day-to-day operations flow smoothly while still balancing availability and costs.
Of course, nothing stops us from allowing the policy to vary over time, if that’s desirable, we simply extend the formulation to include a time dimension in the policy.</p>
<p><strong>The weekly sequence</strong>
To avoid confusion, let’s pin down the order of events in each week under this deterministic setting:</p>
<ol>
<li><strong>Placed orders arrive</strong> at the start of the week (subject to lead time).</li>
<li><strong>Demand happens</strong>: items are sold. If stock is insufficient, a backorder is recorded.</li>
<li><strong>Review and order</strong>: at the end of the week, if stock is below <em>s</em>, order enough to raise it up to <em>S</em>.
Lead time is deterministic and critical:</li>
</ol>
<ul>
<li><em>Lead time = 0</em>: an order placed at the end of this week arrives right at the start of next week.</li>
<li><em>Lead time &gt; 0</em>: the order will only show up later, requiring careful planning to avoid stockouts.
This simple cycle ensures that replenishments are both systematic and predictable.</li>
</ul>
<p>Let´s look at a visual example for one single spare part.
<img src="/images/inventory_policy.png" alt="inventory_policy.png">
The figure above illustrates how an (s, S) = (3, 7) policy unfolds over time for one part assuming a lead time of 2 weeks:</p>
<ul>
<li><strong>Stock trajectory (top plot)</strong>: The light blue line shows inventory over weeks. When stock dips below <em>s</em> (the dashed lower line), an order is triggered, and stock jumps back up to <em>S</em> (the dashed upper line) when the order arrives minus the orders fulfilled or backorders cumulated during the lead time.</li>
<li><strong>Demand (bars, bottom plot)</strong>: Each week, demand reduces the available stock. If demand exceeds available stock, a <strong>stockout</strong> occurs (highlighted in red).</li>
<li><strong>Orders (stars)</strong>: These mark the time when an order is sent out.</li>
</ul>
<p>Perfect, now that we understand how the logic works, we can move on to the mathematical formulation.</p>
<h2 id="mathematical-model">Mathematical Model<a href="#mathematical-model" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>A bit of math and we are going to have a beautifully working policy. Don’t worry, it’s going to be easy to follow, and I’ll even show you how to code it. Pretty cool, right?!</p>
<h3 id="sets--parameters">Sets &amp; Parameters<a href="#sets--parameters" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>We begin with the <em>sets and parameters</em>, the building blocks of the model: items, time horizon and time step, future demand per item, costs, and lead time. (I’ll cover demand forecasting in a separate post.)</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Meaning</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$$\mathcal{i}$$</td>
          <td>Set of items</td>
      </tr>
      <tr>
          <td>$$\mathcal{T}$$</td>
          <td>Set of time periods</td>
      </tr>
      <tr>
          <td>$$d_{it}$$</td>
          <td>Demand for item i in period t</td>
      </tr>
      <tr>
          <td>$$c^p_i$$</td>
          <td>Unit purchase cost of item i</td>
      </tr>
      <tr>
          <td>$$c^h_i$$</td>
          <td>Unit handling cost of item i</td>
      </tr>
      <tr>
          <td>$$c^o_i$$</td>
          <td>Ordering cost of item i</td>
      </tr>
      <tr>
          <td>$$SL_i$$</td>
          <td>Minimum service level for item i</td>
      </tr>
      <tr>
          <td>$$l_i$$</td>
          <td>Lead time of item i</td>
      </tr>
      <tr>
          <td>$$M$$</td>
          <td>A sufficiently large constant (big-M)</td>
      </tr>
  </tbody>
</table>
<h3 id="decision-variables">Decision Variables<a href="#decision-variables" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Then, we have to define the decision variables, the parts of the model that are not fixed but will be determined by the optimization. Remember, we are modelling an optimization model that will determine an <em>(s, S)</em> policy for each item. In the formulation, for readability reasons we use <code>(m, M)</code> instead of <code>(s, S)</code>.</p>
<table>
  <thead>
      <tr>
          <th>Vars</th>
          <th>Meaning</th>
          <th>Type</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$$s_{it}$$</td>
          <td>Inventory of item i and time t</td>
          <td>Cont.</td>
      </tr>
      <tr>
          <td>$$q_{it}$$</td>
          <td>Order quantity of item i at time t</td>
          <td>Cont.</td>
      </tr>
      <tr>
          <td>$$y_{it}$$</td>
          <td>1 if an order for item i at time t, 0 otherwise</td>
          <td>Binary</td>
      </tr>
      <tr>
          <td>$$b_{it}$$</td>
          <td>Backlog of item i at time t</td>
          <td>Cont.</td>
      </tr>
      <tr>
          <td>$$p_{it}$$</td>
          <td>1 if there is a stockout (service not met) item i at time t, 0 otherwise</td>
          <td>Binary</td>
      </tr>
      <tr>
          <td>$$\delta_{it}$$</td>
          <td>1 if there is stock available for item i at time t, 0 otherwise</td>
          <td>Binary</td>
      </tr>
      <tr>
          <td>$$\bar{m}$$</td>
          <td>Minimum inventory threshold for item i</td>
          <td>Cont.</td>
      </tr>
      <tr>
          <td>$$\bar{M}$$</td>
          <td>Maximum inventory threshold for item i</td>
          <td>Cont.</td>
      </tr>
  </tbody>
</table>
<h3 id="objective-function">Objective Function<a href="#objective-function" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>We want to minimize the <strong>sum of purchasing, ordering, and holding costs</strong>:
$$
\min \sum_{i \in \mathcal{I}} \sum_{t \in \mathcal{T}} (c^p_i q_{it} + c^o_i y_{it} + c^h_i s_{it})
$$</p>
<ul>
<li>first term → cost to buy items.</li>
<li>second term → cost to place an order.</li>
<li>third term → cost to store inventory.</li>
</ul>
<h3 id="constraints">Constraints<a href="#constraints" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<ol>
<li>
<p><strong>Service level constraint</strong>
$$
\sum_{t \in \mathcal{T}} p_{it} \le (1 - SL_i) |\mathcal{T}|, \quad \forall i
$$
This ensures that stockouts occur in at most a fraction of periods, guaranteeing the minimum service level for each item. An alternative to constraining the service level to be greater than a lower bound threshold, would be to penalize it in the objective function. However, it might be challenging to put a cost on stockouts, and in some cases (see the pharmaceutical industry) we would like the service level to be equal to 1.
$$
b_{it} \le Mp_{it}, \quad p_{it} \le b_{it}, \quad \forall i, t
$$
We can constraint the backlog or we can constraint the percentage of times we are in stockout. The latter is what we are modelling and it requires additional constraints and binary variables <code>p</code> that should are forced to be equal to 1 whenever there is a backlog.</p>
</li>
<li>
<p><strong>Inventory balance constraint</strong>
$$
s_{it-1} + q_{it-l_i-1} + b_{it} = d_{it} + b_{it-1} + s_{it}, \quad \forall i, t
$$
This constraint ensures that at each time step and for each item, the inventory at the end of each period correctly accounts for previous stock, arriving orders, demand, and any backlog.</p>
</li>
<li>
<p><strong>Logical order constraint</strong>
$$
q_{it} \leq M y_{it}, \quad \forall i, t
$$
This constraint links continuous order quantities <code>q</code> to binary order decisions <code>y</code>. It ensures that if the order quantity <code>q</code> is greater than zero, a purchase order must be placed (<code>y = 1</code>). In other words, whenever we want to order, we must account for the fixed cost of placing that order, which is included in the objective function.</p>
</li>
<li>
<p><strong>At most one order per lead time window</strong>
$$\sum_{t&rsquo;=t}^{t+l_i} y_{it&rsquo;} \leq 1, \quad \forall i$$
Once an order is placed for an item, no additional orders can be made until the supplier delivers it. This constraint may be unnecessary if the supplier allows continuous ordering. In that case, we must clarify the lead time. For example, the supplier might deliver all orders placed at different time steps together, provided certain conditions are met. Let´s keep it simple for now.</p>
</li>
<li>
<p><strong>Minimum inventory level enforcement</strong></p>
</li>
</ol>
<p>$$
s_{it} - b_{it} - \bar{m_i} \leq M \left( 1 - y_{it} \right), \quad \forall i, t
$$</p>
<p>$$
\bar{m_i} + b_{it} - s_{it} + 1 \leq M y_{it} + M \sum_{t&rsquo;=t-l_i}^{t-1} y_{it&rsquo;}
$$</p>
<p>These two constraints ensure that a purchase order can be issued <strong>if and only if</strong> the stock at the end of the period is at or below the minimum level. What these constraints are doing is the following:</p>
<p>$$
s_{it} - b_{it} - \bar{m_i} \leq 0 \Leftrightarrow \sum_{t&rsquo;=t-l_i}^t y_{it} = 1
$$</p>
<p>that is, an order can be issued if and only if the stock on hand at the end of the
period, after discounting the backlog, is at or below the min level.</p>
<ol start="6">
<li>
<p><strong>Maximum inventory level constraints</strong>
$$
q_{it} \leq \bar{m_i} - s_{it} + b_{it} + M \left( 1 - y_{it} \right)
$$
$$
q_{it} \geq \bar{m_i} - s_{it} + b_{it} - M \left( 1 - y_{it} \right)
$$
These two constraints ensure that if an order is placed, the quantity ordered is sufficient to raise the stock <strong>up to the maximum level</strong>, assuming no demand occurs during the lead time. These two constraints, together with the logical order constraint, are used to linearize the following quadratic constraints, which impose that, if an order is issued, the replenishing quantity is <em>up</em>
<em>to max</em>:
$$
q_{it} = \left[ \bar{M_i} - \left( s_{it-1} + b_{it} - b_{it-1} -
d_{it} + q_{it-l_i-1} \right) + b_{it} \right]y_{it} = \left( \bar{M_i} - s_{it} + b_{it}\right)y_{it}
$$
where the last equality is due to the balance constraint.</p>
</li>
<li>
<p><strong>Mutual exclusivity of stock and backlog</strong><br>
$$
s_{it} \leq M \delta_{it}
$$
$$
b_{it} \leq M \left(1 - \delta_{it}\right)
$$
These constraints ensure that stock on hand and backlog cannot be positive at the same time. If there is stock available at the end of a period, backlog must be zero, and conversely, if there is backlog, the stock must be zero. This linearization replaces the quadratic constraint<br>
$$
s_{it} b_{it} = 0
$$
by introducing the auxiliary binary variable delta.</p>
</li>
<li>
<p><strong>Variable domains</strong>
$$
q_{it}, s_{it}, b_{it}, \bar{m_i}, \bar{m_i} \geq 0; \quad y_{it}, p_{it} \in {0,1}
$$
These constraints ensure that each variable remains within its specified domain: binary or positive continuous.</p>
</li>
</ol>
<p>And that’s it! We’ve just written a deterministic, multi-period, multi-item inventory optimization model that, once solved, gives us an optimal <em>(s, S)</em> policy. It might look a bit intimidating if this is your first time seeing a mathematical optimization model, but trust me, the more you read and experiment with these models, the more you’ll start to appreciate the beauty and elegance behind every single equation. The amazing part is that we can model almost anything you can think of. Sometimes, when a function is difficult to define, we can even bring in machine learning to help us learn it, fun fact, that’s actually the topic of my PhD thesis!</p>
<p>Okay, back to our inventory problem. There are still a few things we need to tackle, such as uncertainty which deserves its own post. But before we get there, let’s make everything we’ve written down concrete and see it in action by coding the model with some realistic data. Once we do that, we can run it, analyze the results, and really start to understand how the optimal <em>(s, S)</em> policy behaves in practice.</p>
<blockquote>
<p>⚠️ <strong>Note:</strong> The model we just discussed can be decomposed by item. This means, we can solve the problem separately for each item, and the total cost will simply be the sum of the individual item objective values.<br>
However, this decomposition is no longer possible if there is a global budget constraint that limits total spend across all items.</p></blockquote>
<h1 id="code">Code<a href="#code" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>The following code includes:</p>
<ul>
<li>synthetic data generation for 10 items and 12 weeks (one quarter) with a weekly time step.</li>
<li>model construction using PulP, an open source linear and mixed integer programming modeler.</li>
<li>model optimization using PulP default solver CBC.</li>
<li>data export and plotting.
You can try it out directly on <a href="https://colab.research.google.com/">Google Colab</a>.</li>
</ul>
<p>The first thing we do is to import the packages needed to run our code. We will use the package <strong><a href="https://coin-or.github.io/pulp/">PulP</a></strong> to formulate the model. Then, we define the sets of time steps, 12 weeks, and the set of items. We fix the seed for reproducibility, so that we all get the same results.
All needed packages can be installed using the <code>pip install &lt;name package&gt;</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pulp</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">n_items</span> <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&#34;item_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#34;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_items</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span> <span class="o">=</span> <span class="mi">12</span>
</span></span><span class="line"><span class="cl"><span class="n">periods</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">T</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># fix seed for reproducibility</span>
</span></span><span class="line"><span class="cl"><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</span></span></code></pre></div><p>Now, we can start with the data generation part. Let´s keep it simple but realistic. The demand for each item will have a seasonality pattern.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Baseline demands per item between 1 and 5 units/week</span>
</span></span><span class="line"><span class="cl"><span class="n">base_demand</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">integers</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n_items</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Increase item-specific seasonality amplitude for clearer waves</span>
</span></span><span class="line"><span class="cl"><span class="n">item_seas_amp</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n_items</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">week_pattern</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">T</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Construct demand matrix d[i,t]</span>
</span></span><span class="line"><span class="cl"><span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">items</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">periods</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">periods</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># item-level seasonal multiplier (6-week wave) + week-of-horizon mod + smaller noise</span>
</span></span><span class="line"><span class="cl">        <span class="n">seasonal</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">item_seas_amp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">noise</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span> <span class="o">*</span> <span class="n">base_demand</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># smaller noise</span>
</span></span><span class="line"><span class="cl">        <span class="n">val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">base_demand</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">seasonal</span> <span class="o">*</span> <span class="n">week_pattern</span><span class="p">[</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">noise</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">d</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">it</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span></span></code></pre></div><p>The demand will look like this for the first three items:
<img src="/images/demand_3_items_blue.png" alt="demand_3_items_blue.png"></p>
<p>Okay, we have the sets, we have the demand, now we give a value to the rest of the parameters.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">c_p</span> <span class="o">=</span> <span class="p">{</span><span class="n">it</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="mf">5.0</span> <span class="o">+</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>  <span class="c1"># purchase cost</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">c_o</span> <span class="o">=</span> <span class="p">{</span><span class="n">it</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>  <span class="c1"># ordering cost</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">c_h</span> <span class="o">=</span> <span class="p">{</span><span class="n">it</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>  <span class="c1"># handling cost</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Lead times randomly 1 and 2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">lead_time</span> <span class="o">=</span> <span class="p">{</span><span class="n">it</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]))</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Service level targets 80%</span>
</span></span><span class="line"><span class="cl"><span class="n">SL</span> <span class="o">=</span> <span class="p">{</span><span class="n">it</span><span class="p">:</span> <span class="mf">0.8</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Initial stock is set equal to the average demand</span>
</span></span><span class="line"><span class="cl"><span class="n">init_inventory</span> <span class="o">=</span> <span class="p">{</span><span class="n">it</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Initial backlog is set to 0</span>
</span></span><span class="line"><span class="cl"><span class="n">init_backlog</span> <span class="o">=</span> <span class="p">{</span><span class="n">it</span><span class="p">:</span> <span class="mf">0.0</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Pack parameters to a DataFrame for display in notebook</span>
</span></span><span class="line"><span class="cl"><span class="n">params_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="n">items</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;lead_time&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">lead_time</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;c_p&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">c_p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;c_o&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">c_o</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;c_h&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">c_h</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;SL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">SL</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;init_inv&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">init_inventory</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></div><p>The params data will look like this:</p>
<table>
  <thead>
      <tr>
          <th>item</th>
          <th>lead_time</th>
          <th>c_p</th>
          <th>c_o</th>
          <th>c_h</th>
          <th>SL</th>
          <th>init_inv</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>item_0</td>
          <td>1</td>
          <td>20.55</td>
          <td>2.85</td>
          <td>1.209</td>
          <td>0.8</td>
          <td>6</td>
      </tr>
      <tr>
          <td>item_1</td>
          <td>2</td>
          <td>14.79</td>
          <td>2.65</td>
          <td>1.301</td>
          <td>0.8</td>
          <td>9</td>
      </tr>
      <tr>
          <td>item_2</td>
          <td>2</td>
          <td>24.71</td>
          <td>1.07</td>
          <td>0.173</td>
          <td>0.8</td>
          <td>5</td>
      </tr>
      <tr>
          <td>item_3</td>
          <td>1</td>
          <td>14.30</td>
          <td>1.75</td>
          <td>0.452</td>
          <td>0.8</td>
          <td>5</td>
      </tr>
      <tr>
          <td>item_4</td>
          <td>2</td>
          <td>24.56</td>
          <td>1.10</td>
          <td>1.033</td>
          <td>0.8</td>
          <td>6</td>
      </tr>
      <tr>
          <td>item_5</td>
          <td>1</td>
          <td>13.23</td>
          <td>1.22</td>
          <td>1.387</td>
          <td>0.8</td>
          <td>8</td>
      </tr>
      <tr>
          <td>item_6</td>
          <td>2</td>
          <td>20.87</td>
          <td>2.35</td>
          <td>0.107</td>
          <td>0.8</td>
          <td>9</td>
      </tr>
      <tr>
          <td>item_7</td>
          <td>1</td>
          <td>6.70</td>
          <td>2.43</td>
          <td>0.872</td>
          <td>0.8</td>
          <td>9</td>
      </tr>
      <tr>
          <td>item_8</td>
          <td>2</td>
          <td>16.11</td>
          <td>2.55</td>
          <td>1.116</td>
          <td>0.8</td>
          <td>6</td>
      </tr>
      <tr>
          <td>item_9</td>
          <td>1</td>
          <td>21.04</td>
          <td>2.73</td>
          <td>0.144</td>
          <td>0.8</td>
          <td>7</td>
      </tr>
  </tbody>
</table>
<p>Once sets and parameters are defined, we can move on to the mathematical model formulation.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">model</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpProblem</span><span class="p">(</span><span class="s1">&#39;MultiItem_sS&#39;</span><span class="p">,</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpMinimize</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Decision variables definition</span>
</span></span><span class="line"><span class="cl"><span class="n">s</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">periods</span><span class="p">),</span> <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s1">&#39;Continuous&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">q</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">periods</span><span class="p">),</span> <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s1">&#39;Continuous&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">y</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">periods</span><span class="p">),</span> <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upBound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s1">&#39;Binary&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">b</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">periods</span><span class="p">),</span> <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s1">&#39;Continuous&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pvar</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">periods</span><span class="p">),</span> <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upBound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s1">&#39;Binary&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">delta</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s1">&#39;delta&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">periods</span><span class="p">),</span> <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upBound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s1">&#39;Binary&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">m_bar</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s1">&#39;m_bar&#39;</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s1">&#39;Continuous&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">M_bar</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s1">&#39;M_bar&#39;</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s1">&#39;Continuous&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">bigM</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="mf">1e5</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>  <span class="c1"># large linking constant (consider tightening)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Objective</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="n">model</span> <span class="o">+=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">lpSum</span><span class="p">([</span><span class="n">c_p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">c_o</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">c_h</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                     <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">T</span><span class="p">))]),</span> <span class="s2">&#34;Total_Cost&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Constraints</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 1. Service level constraint</span>
</span></span><span class="line"><span class="cl">    <span class="n">model</span> <span class="o">+=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">lpSum</span><span class="p">([</span><span class="n">pvar</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">T</span><span class="p">)])</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">SL</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">*</span> <span class="n">T</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;ServiceLevel_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 2. Inventory balance</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># t = 0</span>
</span></span><span class="line"><span class="cl">    <span class="n">model</span> <span class="o">+=</span> <span class="n">init_inventory</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">d</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;InventoryBalance_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_0&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 1 &lt;= t &lt; lead_time[i] (no arrivals)</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">lead_time</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">d</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;InventoryBalance_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># t &gt;= lead_time[i] (arrivals possible)</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lead_time</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">T</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span> <span class="o">-</span> <span class="n">lead_time</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">-</span> <span class="n">d</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;InventoryBalance_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">T</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">lt</span> <span class="o">=</span> <span class="n">lead_time</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 3. Link backlog to pvar</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">pvar</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&#34;BacklogUB_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pvar</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&#34;BacklogLB_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 4. Logical order constraint</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&#34;LogicalOrder_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 5. Minimum inventory level enforcement</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">m_bar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]),</span> <span class="sa">f</span><span class="s2">&#34;MinLevel_if_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">po_window</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span> <span class="o">-</span> <span class="n">lt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">sum_prev_y</span> <span class="o">=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">lpSum</span><span class="p">([</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">tp</span><span class="p">]</span> <span class="k">for</span> <span class="n">tp</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">po_window</span><span class="p">,</span> <span class="n">t</span><span class="p">)])</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">m_bar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">sum_prev_y</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;MinLevel_onlyIf_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 6. Maximum inventory level constraints (order-up-to)</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">M_bar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">])</span> <span class="o">-</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;MaxLevelUB_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">M_bar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">])</span> <span class="o">+</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;MaxLevelLB_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 7. Mutual exclusivity of stock and backlog</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">delta</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&#34;MutualExcl_Stock_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bigM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">delta</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]),</span> <span class="sa">f</span><span class="s2">&#34;MutualExcl_Backlog_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 8. At most one order per lead time window</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">lt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">+=</span> <span class="n">pulp</span><span class="o">.</span><span class="n">lpSum</span><span class="p">([</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">tp</span><span class="p">]</span> <span class="k">for</span> <span class="n">tp</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span> <span class="o">+</span> <span class="n">lt</span><span class="p">)])</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;MaxOneOrderWindow_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Ensure maximum &gt;= minimum + 1 (optional)</span>
</span></span><span class="line"><span class="cl">    <span class="n">model</span> <span class="o">+=</span> <span class="n">M_bar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">m_bar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;MaxGreaterMin_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>Great, now we can solve it specifying the solver. In this case we are going to use <a href="https://github.com/coin-or/Cbc">CBC</a> (<em>Coin-or branch and cut</em>) is an <strong>open-source</strong> mixed-integer linear programming solver.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Solve</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Solving using CBC...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">status</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">pulp</span><span class="o">.</span><span class="n">PULP_CBC_CMD</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeLimit</span><span class="o">=</span><span class="mi">60</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Status:&#34;</span><span class="p">,</span> <span class="n">pulp</span><span class="o">.</span><span class="n">LpStatus</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">status</span><span class="p">])</span>
</span></span></code></pre></div><p>Once solved, we can print the min max levels for each item. Our optimal policy!</p>
<table>
  <thead>
      <tr>
          <th>APN</th>
          <th>Min_Level (m_bar)</th>
          <th>Max_Level (M_bar)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>item_0</td>
          <td>3.0</td>
          <td>7.0</td>
      </tr>
      <tr>
          <td>item_1</td>
          <td>1.0</td>
          <td>2.0</td>
      </tr>
      <tr>
          <td>item_2</td>
          <td>1.0</td>
          <td>35.0</td>
      </tr>
      <tr>
          <td>item_3</td>
          <td>0.0</td>
          <td>12.0</td>
      </tr>
      <tr>
          <td>item_4</td>
          <td>1.0</td>
          <td>2.0</td>
      </tr>
      <tr>
          <td>item_5</td>
          <td>2.0</td>
          <td>11.0</td>
      </tr>
      <tr>
          <td>item_6</td>
          <td>4.0</td>
          <td>42.0</td>
      </tr>
      <tr>
          <td>item_7</td>
          <td>0.0</td>
          <td>7.0</td>
      </tr>
      <tr>
          <td>item_8</td>
          <td>0.0</td>
          <td>2.0</td>
      </tr>
      <tr>
          <td>item_9</td>
          <td>5.0</td>
          <td>26.0</td>
      </tr>
  </tbody>
</table>
<p>Let´s take a look at the first item. The policy has a min of 3 and a max of 7. The initial stock is equal to 6 and the lead time is equal to 2 weeks (see table above). In the figure below, we can see the inventory level during the entire time horizon assuming a deterministic demand. Fantastic, isn´t it?</p>
<p><img src="/images/inventory_flow.png" alt="inventory_flow.png"></p>

      </div></div>

  
    

  

  
    

  
  
  <div class="post-share" style="margin-top:2em;">
    <span>Share: </span>

    
    <a href="https://www.linkedin.com/sharing/share-offsite/?url=%2fposts%2finventory-management%2f"
      target="_blank" rel="noopener noreferrer">🔗 LinkedIn</a>

    &nbsp;|&nbsp;

    
    <a href="https://twitter.com/intent/tweet?url=%2fposts%2finventory-management%2f&text=Inventory%20Management%3a%20The%20Art%20of%20Balancing%20Supply%20and%20Demand"
      target="_blank" rel="noopener noreferrer">🐦 X</a>
  </div>
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Donato Maragno — All rights reserved</span>
      </div>
    
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>






  
</div>

</body>
</html>
