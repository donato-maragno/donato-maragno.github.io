<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>[Part 2 - Model] Inventory Management: The Art of Balancing Supply and Demand :: Donato Maragno</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<meta name="description" content=" In the previous post, we covered the fundamentals of inventory management, key policies, and how organizations think about costs and service levels. Now, we dive into the mathematical side: how to formulate a multi-item, multi-period inventory problem as a mixed-integer optimization model. This post will walk through the sets, parameters, decision variables, objective function, and constraints that define an optimal (s, S) policy.
An OPTIMAL policy is all you need Yes, you don’t just need a policy; you need the optimal one. A policy is a rulebook for how inventory decisions are made: when to order, and how much. But among the many possible rules, some are clearly better than others in terms of cost and service. An optimal policy is the one that achieves the desired objectives (high availability, low cost) without wasting resources.
" />
<meta name="keywords" content="" />


<title>
  
    [Part 2 - Model] Inventory Management: The Art of Balancing Supply and Demand | Donato Maragno
  
</title>



  <meta name="robots" content="noodp" />


<link rel="canonical" href="https://donato-maragno.github.io/posts/inventory-management---part-2/" />






  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/main.min.7a14a14d336b3b7500d403219af40c71f75b21e41e75ac9170345d45d70ec473.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/menu.min.310d32205bdedd6f43144e3c3273c9deecd238eba5f9108db5ea96ca0cfbe377.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/post.min.ad50c7f4d00e7975918f37fc74c6029e1959a40d66fb5b2c6564a8715e985573.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/syntax.min.e9ab635cf918bc84b901eb65c0b2caa74c9544245e3647c1af5c129896ef276e.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="https://donato-maragno.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">

<link rel="stylesheet" href="https://donato-maragno.github.io/terminal.css">



<link rel="shortcut icon" href="https://donato-maragno.github.io/favicon.png">
<link rel="apple-touch-icon" href="https://donato-maragno.github.io/apple-touch-icon.png">


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="[Part 2 - Model] Inventory Management: The Art of Balancing Supply and Demand" />
<meta name="twitter:description" content="
In the previous post, we covered the fundamentals of inventory management, key policies, and how organizations think about costs and service levels. Now, we dive into the mathematical side: how to formulate a multi-item, multi-period inventory problem as a mixed-integer optimization model. This post will walk through the sets, parameters, decision variables, objective function, and constraints that define an optimal (s, S) policy.
An OPTIMAL policy is all you need
Yes, you don’t just need a policy; you need the optimal one. A policy is a rulebook for how inventory decisions are made: when to order, and how much. But among the many possible rules, some are clearly better than others in terms of cost and service. An optimal policy is the one that achieves the desired objectives (high availability, low cost) without wasting resources." />
<meta name="twitter:url" content="https://donato-maragno.github.io/posts/inventory-management---part-2/" />

  
    <meta name="twitter:site" content="" />
  
  <meta name="twitter:creator" content="" />



<meta property="og:type" content="article" />
<meta property="og:title" content="[Part 2 - Model] Inventory Management: The Art of Balancing Supply and Demand" />
<meta property="og:description" content=" In the previous post, we covered the fundamentals of inventory management, key policies, and how organizations think about costs and service levels. Now, we dive into the mathematical side: how to formulate a multi-item, multi-period inventory problem as a mixed-integer optimization model. This post will walk through the sets, parameters, decision variables, objective function, and constraints that define an optimal (s, S) policy.
An OPTIMAL policy is all you need Yes, you don’t just need a policy; you need the optimal one. A policy is a rulebook for how inventory decisions are made: when to order, and how much. But among the many possible rules, some are clearly better than others in terms of cost and service. An optimal policy is the one that achieves the desired objectives (high availability, low cost) without wasting resources.
" />
<meta property="og:url" content="https://donato-maragno.github.io/posts/inventory-management---part-2/" />
<meta property="og:site_name" content="Donato Maragno" />





  

<meta property="og:image" content="https://donato-maragno.github.io/preview_post.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="627" />




  <meta property="article:published_time" content="2025-09-03 00:00:00 &#43;0000 UTC" />









<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>





</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Donato Maragno, PhD
  </div>
</a>
    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About me</a></li>
        
      
        
          <li><a href="/research">Research</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About me</a></li>
        
      
        
          <li><a href="/research" >Research</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://donato-maragno.github.io/posts/inventory-management---part-2/">[Part 2 - Model] Inventory Management: The Art of Balancing Supply and Demand</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-09-03</time></div>

  
    <span class="post-tags">
      
      #<a href="https://donato-maragno.github.io/tags/optimization/">optimization</a>&nbsp;
      
      #<a href="https://donato-maragno.github.io/tags/inventory/">inventory</a>&nbsp;
      
      #<a href="https://donato-maragno.github.io/tags/math/">math</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <blockquote>
<p>In the <a href="/posts/inventory-management---part-1/">previous post</a>, we covered the fundamentals of inventory management, key policies, and how organizations think about costs and service levels. Now, we dive into the <strong>mathematical side</strong>: how to formulate a multi-item, multi-period inventory problem as a <strong>mixed-integer optimization model</strong>. This post will walk through the sets, parameters, decision variables, objective function, and constraints that define an optimal <em>(s, S)</em> policy.</p></blockquote>
<h1 id="an-optimal-policy-is-all-you-need">An <em>OPTIMAL</em> policy is all you need<a href="#an-optimal-policy-is-all-you-need" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>Yes, you don’t just need <em>a</em> policy; you need the <em>optimal</em> one. A policy is a rulebook for how inventory decisions are made: when to order, and how much. But among the many possible rules, some are clearly better than others in terms of cost and service. An <em>optimal</em> policy is the one that achieves the desired objectives (high availability, low cost) without wasting resources.</p>
<p>Of course, the real world is full of uncertainty: demand fluctuates, lead times vary, and suppliers can fail. But before dealing with those messy realities, it’s crucial to first build intuition in a simpler setting, the <strong>deterministic case</strong>, where demand and lead times are perfectly known. This isn’t realistic, but it provides solid foundations: by understanding the “clean” case, we know what we’re aiming for before layering on uncertainty.</p>
<p>How to optimize a policy depends on the policy itself. To give you a concrete example, I will use the (s, S) policy which is simple, intuitive, and widely used in both research and practice.  We have a <strong>multi-item multi-period inventory</strong> problem. The goal is to find for each item an (s, S) policy that <strong>minimizes costs</strong> while respecting service level constraints. <em>Note that a similar methodology could be applied to the case where the service level is maximized and the spend constrained to a predefined budget.</em></p>
<p>We model this problem using <strong>mixed-integer optimization (MIO)</strong>, a powerful yet intuitive way to translate real-world decisions into mathematical equations. For each item, demand is assumed to be known in advance and represented as a 52-dimensional vector (one entry per week over a full year). We also assume that the <strong>reordering policy remains fixed throughout the year</strong>. Why? Because constantly adjusting rules for every single item would overwhelm planners with operational complexity. A stable, year-long policy provides consistency, reduces overhead, and ensures that day-to-day operations flow smoothly while still balancing availability and costs.
Of course, nothing stops us from allowing the policy to vary over time, if that’s desirable, we simply extend the formulation to include a time dimension in the policy.</p>
<p><strong>The weekly sequence</strong>
To avoid confusion, let’s pin down the order of events in each week under this deterministic setting:</p>
<ol>
<li><strong>Placed orders arrive</strong> at the start of the week (subject to lead time).</li>
<li><strong>Demand happens</strong>: items are sold. If stock is insufficient, a backorder is recorded.</li>
<li><strong>Review and order</strong>: at the end of the week, if stock is below <em>s</em>, order enough to raise it up to <em>S</em>.
Lead time is deterministic and critical:</li>
</ol>
<ul>
<li><em>Lead time = 0</em>: an order placed at the end of this week arrives right at the start of next week.</li>
<li><em>Lead time &gt; 0</em>: the order will only show up later, requiring careful planning to avoid stockouts.
This simple cycle ensures that replenishments are both systematic and predictable.</li>
</ul>
<p>Let´s look at a visual example for one single spare part.
![[inventory_policy.png]]
The figure above illustrates how an (s, S) = (3, 7) policy unfolds over time for one part assuming a lead time of 2 weeks:</p>
<ul>
<li><strong>Stock trajectory (top plot)</strong>: The light blue line shows inventory over weeks. When stock dips below <em>s</em> (the dashed lower line), an order is triggered, and stock jumps back up to <em>S</em> (the dashed upper line) when the order arrives minus the orders fulfilled or backorders cumulated during the lead time.</li>
<li><strong>Demand (bars, bottom plot)</strong>: Each week, demand reduces the available stock. If demand exceeds available stock, a <strong>stockout</strong> occurs (highlighted in red).</li>
<li><strong>Orders (stars)</strong>: These mark the time when an order is sent out.</li>
</ul>
<p>Perfect, now that we understand how the logic works, we can move on to the mathematical formulation.</p>
<h2 id="mathematical-model">Mathematical Model<a href="#mathematical-model" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>A bit of math and we are going to have a beautifully working policy. Don’t worry, it’s going to be easy to follow, and I’ll even show you how to code it. Pretty cool, right?!</p>
<h3 id="sets--parameters">Sets &amp; Parameters<a href="#sets--parameters" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>We begin with the <em>sets and parameters</em>, the building blocks of the model: items, time horizon and time step, future demand per item, costs, and lead time. (I’ll cover demand forecasting in a separate post.)</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Meaning</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$$\mathcal{i}$$</td>
          <td>Set of items</td>
      </tr>
      <tr>
          <td>$$\mathcal{T}$$</td>
          <td>Set of time periods</td>
      </tr>
      <tr>
          <td>$$d_{it}$$</td>
          <td>Demand for item i in period t</td>
      </tr>
      <tr>
          <td>$$c^p_i$$</td>
          <td>Unit purchase cost of item i</td>
      </tr>
      <tr>
          <td>$$c^h_i$$</td>
          <td>Unit handling cost of item i</td>
      </tr>
      <tr>
          <td>$$c^o_i$$</td>
          <td>Ordering cost of item i</td>
      </tr>
      <tr>
          <td>$$SL_i$$</td>
          <td>Minimum service level for item i</td>
      </tr>
      <tr>
          <td>$$l_i$$</td>
          <td>Lead time of item i</td>
      </tr>
      <tr>
          <td>$$M$$</td>
          <td>A sufficiently large constant (big-M)</td>
      </tr>
  </tbody>
</table>
<h3 id="decision-variables">Decision Variables<a href="#decision-variables" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Then, we have to define the decision variables, the parts of the model that are not fixed but will be determined by the optimization. Remember, we are modelling an optimization model that will determine an <em>(s, S)</em> policy for each item. In the formulation, for readability reasons we use <code>(m, M)</code> instead of <code>(s, S)</code>.</p>
<table>
  <thead>
      <tr>
          <th>Vars</th>
          <th>Meaning</th>
          <th>Type</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$$s_{it}$$</td>
          <td>Inventory of item i and time t</td>
          <td>Cont.</td>
      </tr>
      <tr>
          <td>$$q_{it}$$</td>
          <td>Order quantity of item i at time t</td>
          <td>Cont.</td>
      </tr>
      <tr>
          <td>$$y_{it}$$</td>
          <td>1 if an order for item i at time t, 0 otherwise</td>
          <td>Binary</td>
      </tr>
      <tr>
          <td>$$b_{it}$$</td>
          <td>Backlog of item i at time t</td>
          <td>Cont.</td>
      </tr>
      <tr>
          <td>$$p_{it}$$</td>
          <td>1 if there is a stockout (service not met) item i at time t, 0 otherwise</td>
          <td>Binary</td>
      </tr>
      <tr>
          <td>$$\delta_{it}$$</td>
          <td>1 if there is stock available for item i at time t, 0 otherwise</td>
          <td>Binary</td>
      </tr>
      <tr>
          <td>$$\bar{m}$$</td>
          <td>Minimum inventory threshold for item i</td>
          <td>Cont.</td>
      </tr>
      <tr>
          <td>$$\bar{M}$$</td>
          <td>Maximum inventory threshold for item i</td>
          <td>Cont.</td>
      </tr>
  </tbody>
</table>
<h3 id="objective-function">Objective Function<a href="#objective-function" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>We want to minimize the <strong>sum of purchasing, ordering, and holding costs</strong>:
$$
\min \sum_{i \in \mathcal{I}} \sum_{t \in \mathcal{T}} (c^p_i q_{it} + c^o_i y_{it} + c^h_i s_{it})
$$</p>
<ul>
<li>first term → cost to buy items.</li>
<li>second term → cost to place an order.</li>
<li>third term → cost to store inventory.</li>
</ul>
<h3 id="constraints">Constraints<a href="#constraints" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<ol>
<li>
<p><strong>Service level constraint</strong>
$$
\sum_{t \in \mathcal{T}} p_{it} \le (1 - SL_i) |\mathcal{T}|, \quad \forall i
$$
This ensures that stockouts occur in at most a fraction of periods, guaranteeing the minimum service level for each item. An alternative to constraining the service level to be greater than a lower bound threshold, would be to penalize it in the objective function. However, it might be challenging to put a cost on stockouts, and in some cases (see the pharmaceutical industry) we would like the service level to be equal to 1.
$$
b_{it} \le Mp_{it}, \quad p_{it} \le b_{it}, \quad \forall i, t
$$
We can constraint the backlog or we can constraint the percentage of times we are in stockout. The latter is what we are modelling and it requires additional constraints and binary variables <code>p</code> that should are forced to be equal to 1 whenever there is a backlog.</p>
</li>
<li>
<p><strong>Inventory balance constraint</strong>
$$
s_{it-1} + q_{it-l_i-1} + b_{it} = d_{it} + b_{it-1} + s_{it}, \quad \forall i, t
$$
This constraint ensures that at each time step and for each item, the inventory at the end of each period correctly accounts for previous stock, arriving orders, demand, and any backlog.</p>
</li>
<li>
<p><strong>Logical order constraint</strong>
$$
q_{it} \leq M y_{it}, \quad \forall i, t
$$
This constraint links continuous order quantities <code>q</code> to binary order decisions <code>y</code>. It ensures that if the order quantity <code>q</code> is greater than zero, a purchase order must be placed (<code>y = 1</code>). In other words, whenever we want to order, we must account for the fixed cost of placing that order, which is included in the objective function.</p>
</li>
<li>
<p><strong>At most one order per lead time window</strong>
$$\sum_{t&rsquo;=t}^{t+l_i} y_{it&rsquo;} \leq 1, \quad \forall i$$
Once an order is placed for an item, no additional orders can be made until the supplier delivers it. This constraint may be unnecessary if the supplier allows continuous ordering. In that case, we must clarify the lead time. For example, the supplier might deliver all orders placed at different time steps together, provided certain conditions are met. Let´s keep it simple for now.</p>
</li>
<li>
<p><strong>Minimum inventory level enforcement</strong></p>
</li>
</ol>
<p>$$
s_{it} - b_{it} - \bar{m_i} \leq M \left( 1 - y_{it} \right), \quad \forall i, t
$$</p>
<p>$$
\bar{m_i} + b_{it} - s_{it} + 1 \leq M y_{it} + M \sum_{t&rsquo;=t-l_i}^{t-1} y_{it&rsquo;}
$$</p>
<p>These two constraints ensure that a purchase order can be issued <strong>if and only if</strong> the stock at the end of the period is at or below the minimum level. What these constraints are doing is the following:</p>
<p>$$
s_{it} - b_{it} - \bar{m_i} \leq 0 \Leftrightarrow \sum_{t&rsquo;=t-l_i}^t y_{it} = 1
$$</p>
<p>that is, an order can be issued if and only if the stock on hand at the end of the
period, after discounting the backlog, is at or below the min level.</p>
<ol start="6">
<li>
<p><strong>Maximum inventory level constraints</strong>
$$
q_{it} \leq \bar{m_i} - s_{it} + b_{it} + M \left( 1 - y_{it} \right)
$$
$$
q_{it} \geq \bar{m_i} - s_{it} + b_{it} - M \left( 1 - y_{it} \right)
$$
These two constraints ensure that if an order is placed, the quantity ordered is sufficient to raise the stock <strong>up to the maximum level</strong>, assuming no demand occurs during the lead time. These two constraints, together with the logical order constraint, are used to linearize the following quadratic constraints, which impose that, if an order is issued, the replenishing quantity is <em>up</em>
<em>to max</em>:
$$
q_{it} = \left[ \bar{M_i} - \left( s_{it-1} + b_{it} - b_{it-1} -
d_{it} + q_{it-l_i-1} \right) + b_{it} \right]y_{it} = \left( \bar{M_i} - s_{it} + b_{it}\right)y_{it}
$$
where the last equality is due to the balance constraint.</p>
</li>
<li>
<p><strong>Mutual exclusivity of stock and backlog</strong><br>
$$
s_{it} \leq M \delta_{it}
$$
$$
b_{it} \leq M \left(1 - \delta_{it}\right)
$$
These constraints ensure that stock on hand and backlog cannot be positive at the same time. If there is stock available at the end of a period, backlog must be zero, and conversely, if there is backlog, the stock must be zero. This linearization replaces the quadratic constraint<br>
$$
s_{it} b_{it} = 0
$$
by introducing the auxiliary binary variable delta.</p>
</li>
<li>
<p><strong>Variable domains</strong>
$$
q_{it}, s_{it}, b_{it}, \bar{m_i}, \bar{m_i} \geq 0; \quad y_{it}, p_{it} \in {0,1}
$$
These constraints ensure that each variable remains within its specified domain: binary or positive continuous.</p>
</li>
</ol>
<p>And that’s it! We’ve just written a deterministic, multi-period, multi-item inventory optimization model that, once solved, gives us an optimal <em>(s, S)</em> policy. It might look a bit intimidating if this is your first time seeing a mathematical optimization model, but trust me, the more you read and experiment with these models, the more you’ll start to appreciate the beauty and elegance behind every single equation. The amazing part is that we can model almost anything you can think of. Sometimes, when a function is difficult to define, we can even bring in machine learning to help us learn it, fun fact, that’s actually the topic of my PhD thesis!</p>
<p>Okay, back to our inventory problem. There are still a few things we need to tackle, such as uncertainty which deserves its own post. But before we get there, let’s make everything we’ve written down concrete and see it in action by coding the model with some realistic data. Once we do that, we can run it, analyze the results, and really start to understand how the optimal <em>(s, S)</em> policy behaves in practice.</p>
<blockquote>
<p>⚠️ <strong>Note:</strong> The model we just discussed can be decomposed by item. This means, we can solve the problem separately for each item, and the total cost will simply be the sum of the individual item objective values.<br>
However, this decomposition is no longer possible if there is a global budget constraint that limits total spend across all items.</p></blockquote>
<p>In the <a href="/posts/inventory-management---part-3/">next post</a>, we will see how to code this model in python using an open source modelling package and solver.</p>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Read other posts</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://donato-maragno.github.io/posts/inventory-management---part-1/" class="button inline prev">
        &lt; [<span class="button__text">[Part 1 - Theory] Inventory Management: The Art of Balancing Supply and Demand</span>]
      </a>
    
    
      ::
    
    
      <a href="https://donato-maragno.github.io/posts/inventory-management---part-3/" class="button inline next">
         [<span class="button__text">[Part 3 - Code] Inventory Management: The Art of Balancing Supply and Demand</span>] &gt;
      </a>
    
  </div>
</div>


  

  
    

  
  
  <div class="share-buttons" style="margin-top:2em;">
    <span>Share: </span>
    
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fdonato-maragno.github.io%2fposts%2finventory-management---part-2%2f" 
      target="_blank" rel="noopener noreferrer">LinkedIn</a> |
    
    <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fdonato-maragno.github.io%2fposts%2finventory-management---part-2%2f&text=%5BPart&#43;2&#43;-&#43;Model%5D&#43;Inventory&#43;Management%3A&#43;The&#43;Art&#43;of&#43;Balancing&#43;Supply&#43;and&#43;Demand" 
      target="_blank" rel="noopener noreferrer">X</a>
  </div>
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Donato Maragno — All rights reserved</span>
      </div>
    
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>






  
</div>

</body>
</html>
